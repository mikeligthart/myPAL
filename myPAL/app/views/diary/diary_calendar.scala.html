@(date: String, realDate: String, activities: List[models.interfaces.DiaryActivityToHTML])

@import play.i18n._

@diary(Messages.get("page.diary.base.calendar"))("calendar") {

        <link rel="stylesheet" media="screen" href='@routes.Assets.at("stylesheets/datepicker.css")'>
        <script src=@routes.Assets.at("javascripts/bootstrap-datepicker.js")></script>

    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    @if(activities.size > 0){
        <script type="text/javascript">
                  google.load("visualization", "1", {packages:["timeline"]});
                  google.setOnLoadCallback(drawChart);

                  function drawChart() {
                    var container = document.getElementById('timeline');
                    var chart = new google.visualization.Timeline(container);
                    var dataTable = new google.visualization.DataTable();

                      dataTable.addColumn({ type: 'string', id: 'DiaryItem' });
                      dataTable.addColumn({ type: 'string', id: 'Type' });
                      dataTable.addColumn({ type: 'date', id: 'Start' });
                      dataTable.addColumn({ type: 'date', id: 'End' });


                          dataTable.addRows([
                          @for(activity <- activities) {

                            [ '@Messages.get("page.diary.calendar.activity")', '@activity.getType', new Date(0,0,0,@activity.getStartHour,@activity.getStartMin,0), new Date(0,0,0,@activity.getEndHour,@activity.getEndMin,0) ],
                            }
                            ]);

                      var options = {
                        timeline: { colorByRowLabel: true}
                      };

                    function selectHandler() {
                        var selectedItem = chart.getSelection()[0];
                        if (selectedItem) {

                        }
                      }

                      // Listen for the 'select' event, and call my function selectHandler() when
                      // the user selects something on the chart.
                      google.visualization.events.addListener(chart, 'select', selectHandler);

                      chart.draw(dataTable, options);
                  }
        </script>
    }

        <div class="text-center">
            <h1>@Messages.get("page.diary.base.calendar")</h1>
            <a href='@routes.Application.calendarUpdate("-")' class="btn btn-default"> <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span></a> <button class="btn btn-default" id="datePicker" data-date="@realDate" data-date-format="dd/mm/yyyy">@date <span class="glyphicon glyphicon-calendar" aria-hidden="true"></span></button> <a href='@routes.Application.calendarUpdate("+")' class="btn btn-default"> <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
        </div>

        <div id="timeline" style="width:70%; height:90%;" class="text-center"></div>
        <div class="calendar_selected_title"></div>
        <div class="calendar_selected_info"></div>

    @if(activities.size == 0){
        <div class="text-center">
            <br />
            <h3>No activities available</h3>
        </div>
    }

    <script src=@routes.Assets.at("javascripts/main.js")></script>
}