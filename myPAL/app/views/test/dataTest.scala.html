<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <title>DataTest</title>
    <link rel="shortcut icon" type="image/png" href='@routes.Assets.at("images/favicon.png")'>

    <!-- Bootstrap CSS-->
    <link rel="stylesheet" media="screen" href='@routes.Assets.at("stylesheets/bootstrap.min.css")'>
    <link rel="stylesheet" media="screen" href='@routes.Assets.at("stylesheets/bootstrap-theme.min.css")'>
    <link rel="stylesheet" media="screen" href='@routes.Assets.at("stylesheets/bootstrap-datatables.css")'>

    <!-- myPAL CSS -->
    <link rel="stylesheet" media="screen" href='@routes.Assets.at("stylesheets/mypal.css")'>


    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src=@routes.Assets.at("javascripts/jquery.min.js")></script>
    <script src='@routes.Assets.at("javascripts/jquery.dataTables.min.js")' type="text/javascript"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <!-- Bootstrap -->
    <script src='@routes.Assets.at("javascripts/bootstrap.min.js")' type="text/javascript"></script>
    <!-- Datatables Bootstrap integration -->
    <script type="text/javascript" language="javascript" src='@routes.Assets.at("stylesheets/bootstrap-datatables.js")'></script>

    <script type="text/javascript" charset="utf-8">
        function deleteUserExample(email){
            $.ajax({
            type: "DELETE",
            //url: jsRoutes.controllers.Application.deleteUser(email),
            url: "/admin/users/" + email,
            data: {email:email},
        });
    }

        $(document).ready(function() {
            var table = $('#example').DataTable( {
                "ajax": "/admin/users/list",
                "columns": [
                    { "data": "email" },
                    { "data": "firstName" },
                    { "data": "lastName" },
                    {
                        "data": null,
                        "defaultContent": '<button id="removeButton" type="button" class="btn btn-default" aria-label="Left Align"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>'
                    }
                ]
            } );

        $('#example tbody').on( 'click', '#removeButton', function () {
                deleteUserExample(table.row($(this).closest('tr')).data().email);
                table.row($(this).closest('tr')).remove().draw( false );

            } );
        } );
	</script>
</head>

<body role="document">
    <div class="container">
        <button id="button">Delete</button>
        <table id="example" class="table table-striped table-bordered" cellspacing="0" width="100%">
            <thead>
            <tr>
                <th>E-mail</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Options</th>
            </tr>
            </thead>
            <tbody>
                <td>E-mail</td>
                <td>First Name</td>
                <td>Last Name</td>
                <td>Options</td>
            </tbody>
        </table>
    </div>
</body>
</html>